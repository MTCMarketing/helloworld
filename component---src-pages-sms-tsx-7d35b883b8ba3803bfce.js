"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[249],{3391:function(e,t,a){a.r(t);var s=a(5785),r=a(7294);const o="AYrkAAIjcDFjZDZlODJmNzQ2YzI0M2JiOGU5YjE2ZWU3MGMwMjI1OHAxMA";t.default=()=>{const{0:e,1:t}=(0,r.useState)([]),{0:a,1:n}=(0,r.useState)(!1),{0:l,1:c}=(0,r.useState)(""),u="test-channel",{0:i,1:d}=(0,r.useState)([]);return(0,r.useEffect)((()=>{let e=!0;return(async()=>{console.log(1);const t=await fetch("https://rare-coral-35556.upstash.io/subscribe/"+u,{method:"GET",headers:{Authorization:"Bearer "+o}});if(!t.body)return void console.error("No response body");const a=t.body.pipeThrough(new TextDecoderStream).getReader();for(console.log(2);e;){const{value:e,done:t}=await a.read();if(t)break;console.log("Received:",e),d((t=>[].concat((0,s.Z)(t),[e.trim()])))}console.log(5)})(),()=>{e=!1}}),[]),r.createElement("div",null,r.createElement("h1",null,"Upstash Pub/Sub Test"),r.createElement("p",null,"Waiting for messages from Upstash..."),r.createElement("ul",null,i.map(((e,t)=>r.createElement("li",{key:t},e)))))}}}]);
//# sourceMappingURL=component---src-pages-sms-tsx-7d35b883b8ba3803bfce.js.map