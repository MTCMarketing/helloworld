"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[249],{3391:function(e,t,s){s.r(t);var a=s(5785),o=s(7294);const r="AYrkAAIjcDFjZDZlODJmNzQ2YzI0M2JiOGU5YjE2ZWU3MGMwMjI1OHAxMA";t.default=()=>{const{0:e,1:t}=(0,o.useState)([]),{0:s,1:l}=(0,o.useState)(!1),{0:n,1:c}=(0,o.useState)(""),u="test-channel",{0:i,1:d}=(0,o.useState)([]);return(0,o.useEffect)((()=>{let e=!0;return(async()=>{console.log(1);const t=await fetch("https://rare-coral-35556.upstash.io/subscribe/"+u,{method:"GET",headers:{Authorization:"Bearer "+r}});if(console.log(2),!t.body)return void console.error("No response body");const s=t.body.pipeThrough(new TextDecoderStream).getReader();for(console.log(3);e;){const{value:e,done:t}=await s.read();if(t)break;console.log("Received:",e),d((t=>[].concat((0,a.Z)(t),[e.trim()])))}console.log(5)})(),()=>{e=!1}}),[]),o.createElement("div",null,o.createElement("h1",null,"Upstash Pub/Sub Test"),o.createElement("p",null,"Waiting for messages from Upstash..."),o.createElement("ul",null,i.map(((e,t)=>o.createElement("li",{key:t},e)))))}}}]);
//# sourceMappingURL=component---src-pages-sms-tsx-ebbfbd9b3bb01609f219.js.map